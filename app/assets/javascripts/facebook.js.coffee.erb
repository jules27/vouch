jQuery ->
  $('body').prepend('<div id="fb-root"></div>')

$j = jQuery

window.fbAsyncInit = ->
  FB.init
    appId: '<%= Settings.facebook_app_id %>'
    status: true
    cookie: true

  FB.getLoginStatus (response) ->
    if (response.status == 'connected')
      console.log "connected"
    else if (response.status == 'not_authorized')
      console.log "not authorized"
    else
      console.log "not logged in"

  # FB.ui { 
  #   method: 'feed' 
  # }
  FB.login (response) ->
    if (response.authResponse)
      console.log "connected"
    else
      console.log "cancelled"

# Load the SDK Asynchronously
$j ->
  d = document
  s = 'script'
  id = 'facebook-jssdk'

  js = d.getElementsByTagName(s)[0]
  fjs = d.getElementsByTagName(s)[0]
  if (d.getElementById(id))
    return
  js = d.createElement(s)
  js.id = id
  js.src = "//connect.facebook.net/en_US/all.js"
  fjs.parentNode.insertBefore(js, fjs)
  console.log "here"
  return
